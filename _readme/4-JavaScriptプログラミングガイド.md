ICT株式会社

JavaScriptプログラミングガイド
==================================================
DI-KIT コーポレート

* 2021.05.18
* ICT株式会社　長尾一矢

目次
--------------------------------------------------

1. 概要
2. JSファイルについて
3. ディレクトリ構造について
4. DI-KITを使用したJSプログラミングの流れ


1・概要
--------------------------------------------------

`origin/_js/`には、数々のJavaScriptファイルが収められています。  
これらはwebpackを通じて`public/js/script.js`としてビルドされます。



2・JSファイルについて
--------------------------------------------------

各モジュールごとに個別にJSファイルを作成してください。

ファイル名は原則としてREMMのRootsとなるclass属性値に合わせておきます。  
（参考： https://remm.qwiproject.com )



3・ディレクトリ構造について
--------------------------------------------------

`origin/_js`以下の各ディレクトリへは、以下の対応でファイルを配置し、`origin/_js/script.js`内で`import`してください。

* contents … サイトフレームのsite_mainに入れ子として配置されるコンテンツ領域で使用するスクリプト
* frame … ヘッダーやフッター、ナビゲーションなど、大外枠のサイトフレームとして配置されるサイトフレーム領域で使用するスクリプト
* utility … ページ全体で汎用的使用または共通使用するスクリプト
* vender … jQueryコアファイルやSwiperなど、第三者の開発したJSライブラリやプラグインを利用する場合はここへ

※第三者の開発したJSライブラリやプラグインに同梱されているCSSは、`origin/_js/script.js`内でJSファイルと一緒に読み込んでください  
　（script.jsの最下部にJSとCSSを一緒にimportするサンプルコードをコメントアウトしてありますので参照してください）

※第三者の開発したJSライブラリやプラグインに同梱されているCSSは、基本的に編集しないでください  
　標準設定されているスタイルを変更する場合は、`origin/_sass`内でscssファイルを作成してスタイルを上書きしてください


<div class="new_page" style="page-break-after:always"></div><!--印刷改頁-->


4・jQueryの利用について
--------------------------------------------------

jQuery 3.6.0をバンドルしています。

`origin/_js/script.js`で`import`した各JSファイルではjQueryを利用できますが、HTMLコード内に`<script>`で記述する場合、初期状態のままではjQueryを利用できません。

HTMLファイルやPHPフレームワークのviewテンプレートにjQueryコードを記述する必要がある場合は、`origin/_js/script.js`内の「jQueryをグローバルに展開」部分を参照し、import文のコメントアウトを解除してください。


5・JSプラグインの利用方法
--------------------------------------------------

JSプラグインを利用する場合は`script.js`ではimportせず、`プラグインを利用するモジュール用JSファイル内`で`個別にimport`します。  

個別にimportした場合でも、JSビルドに使用しているwebpackの機能により重複が解消されるため、容量は不必要に肥大化しません。

※具体例は`origin/_js/contents/main_visual_carousel.js`の先頭でSwiperをimportしている部分を参照してください